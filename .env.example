# ============================================
# 智能记账助手 - 环境变量配置示例
# ============================================
# 复制此文件为 .env 或 .env.local 并修改相应配置
# 注意：不要将包含真实密钥的 .env 文件提交到Git

# ============================================
# 应用基础配置
# ============================================
NODE_ENV=development
PORT=3000
APP_NAME=智能记账助手
APP_VERSION=1.0.0
API_PREFIX=/api/v1
APP_URL=http://localhost:3000

# ============================================
# 数据库配置 (PostgreSQL)
# ============================================
# 开发环境使用本地PostgreSQL
DATABASE_URL=postgresql://admin:password@localhost:5432/smart_finance
# 生产环境示例：
# DATABASE_URL=postgresql://user:password@host:5432/database?schema=public
DATABASE_SSL=false

# Docker Compose环境变量（如果使用Docker）
POSTGRES_USER=admin
POSTGRES_PASSWORD=password
POSTGRES_DB=smart_finance

# ============================================
# Redis配置
# ============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TTL=60

# ============================================
# JWT认证配置
# ============================================
# 使用以下命令生成密钥：
# node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# 或使用：openssl rand -base64 32
JWT_SECRET=your_jwt_secret_key_min_32_characters_here
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=your_jwt_refresh_secret_key_min_32_characters_here
JWT_REFRESH_EXPIRES_IN=30d

# ============================================
# 文件上传配置
# ============================================
UPLOAD_MAX_FILE_SIZE=10485760
UPLOAD_ALLOWED_EXTENSIONS=jpg,jpeg,png,pdf,doc,docx

# ============================================
# MinIO对象存储配置（可选）
# ============================================
MINIO_ENDPOINT=localhost
MINIO_PORT=9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET=smart-finance
MINIO_USE_SSL=false

# ============================================
# AI服务配置
# ============================================
# DeepSeek API配置（推荐）
DEEPSEEK_API_KEY=your_deepseek_api_key_here
DEEPSEEK_API_URL=https://api.deepseek.com/v1/chat/completions
DEEPSEEK_MODEL=deepseek-chat

# OpenAI API配置（可选，作为备选）
OPENAI_API_KEY=your_openai_api_key_here

# AI服务超时时间（毫秒）
AI_SERVICE_TIMEOUT=30000

# ============================================
# 邮件服务配置（可选）
# ============================================
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=your_email@example.com
SMTP_PASS=your_email_password
EMAIL_FROM=noreply@smartfinance.com

# ============================================
# 第三方登录配置（可选）
# ============================================
# 微信登录
WECHAT_APP_ID=your_wechat_app_id
WECHAT_APP_SECRET=your_wechat_app_secret

# 支付宝登录
ALIPAY_APP_ID=your_alipay_app_id
ALIPAY_PRIVATE_KEY=your_alipay_private_key
ALIPAY_PUBLIC_KEY=your_alipay_public_key

# ============================================
# 安全配置
# ============================================
# CORS允许的源（多个用逗号分隔）
CORS_ORIGIN=http://localhost:5173,http://localhost:4173,http://127.0.0.1:5173

# 速率限制配置
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=100

# ============================================
# 监控和日志配置
# ============================================
# Sentry错误监控（可选）
SENTRY_DSN=your_sentry_dsn_here

# 日志配置
LOG_LEVEL=info
LOG_FORMAT=json

# ============================================
# 功能开关
# ============================================
# 启用AI功能
FEATURE_AI_ENABLED=true

# 启用邮箱验证
FEATURE_EMAIL_VERIFICATION=false

# 启用短信验证
FEATURE_SMS_VERIFICATION=false

# ============================================
# 前端环境变量（Vite）
# ============================================
# 注意：Vite环境变量必须以 VITE_ 开头
VITE_API_URL=http://localhost:3000/api/v1
VITE_WS_URL=ws://localhost:3000
VITE_APP_NAME=智能记账助手
VITE_ENABLE_AI=true
VITE_SENTRY_DSN=

# ============================================
# 开发环境特定配置
# ============================================
# 开发环境下的额外配置
# 这些配置只在 NODE_ENV=development 时生效

# 是否启用Swagger文档
ENABLE_SWAGGER=true

# 是否启用数据库同步（生产环境请设为false）
DATABASE_SYNC=false

# 是否启用详细日志
VERBOSE_LOGGING=true

# ============================================
# 生产环境特定配置
# ============================================
# 生产环境下的额外配置
# 这些配置只在 NODE_ENV=production 时生效

# 生产环境URL
# PROD_APP_URL=https://your-domain.com

# 生产环境数据库SSL
# DATABASE_SSL=true

# 生产环境CORS
# CORS_ORIGIN=https://your-domain.com

# ============================================
# 说明
# ============================================
# 1. 必需配置：
#    - DATABASE_URL: 数据库连接字符串
#    - JWT_SECRET: JWT密钥（至少32个字符）
#    - JWT_REFRESH_SECRET: JWT刷新密钥（至少32个字符）
#
# 2. 推荐配置：
#    - DEEPSEEK_API_KEY: AI功能需要
#    - REDIS_PASSWORD: 生产环境建议设置
#    - MINIO_ACCESS_KEY / MINIO_SECRET_KEY: 文件上传功能需要
#
# 3. 可选配置：
#    - SMTP相关: 邮件功能需要
#    - 第三方登录: 微信/支付宝登录需要
#    - SENTRY_DSN: 错误监控需要
#
# 4. 生成密钥的方法：
#    - JWT密钥: openssl rand -base64 32
#    - 或使用: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
# 5. 安全提示：
#    - 不要将包含真实密钥的 .env 文件提交到Git
#    - 生产环境使用强密码和密钥
#    - 定期轮换密钥和密码
#    - 使用环境变量管理工具（如AWS Secrets Manager）
